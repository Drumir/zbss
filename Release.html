<!DOCTYPE html>

<html>

<head>
  <meta  http-equiv="Content-Type" content="text/html; charset=windows-1251">

  <title>ZBSS</title>

  <link rel="stylesheet" type="text/css" href="style.css"/>

  <script type="text/javascript" src=".\js\jquery-2.0.3.min.js"></script>
  <script type="text/javascript" src=".\js\bss.js"></script>
  <script type="text/javascript" src=".\js\popup.js"></script>
  <script type="text/javascript" src=".\js\popupTicket.js"></script>
  <script type="text/javascript" src=".\js\popupNewT.js"></script>
  <script type="text/javascript" src=".\js\popupTransfer.js"></script>
  <script type="text/javascript" src=".\js\popupZabix.js"></script>
  <script type="text/javascript" src=".\js\ajax.js"></script>
  <script type="text/javascript" src=".\js\md5.js"></script>
  <script type="text/javascript" src=".\js\jqzabbix.js"></script>


</head>

<body>
  <table id="menuTable" align="left">
    <td id="statusName" style='background-color:#90C08C'>Войти</td>
    <td>
      <button id="buttonMove"   disabled="true">Перевести</button>
      <button id="buttonRenew" disabled="true" style="width:120px">Обновить</button>
      <button id="buttonNew" >Новый ТТ</button>
    </td>
    <td valign = "baseline"><input type="text" id="searchTT" size="7" placeholder="№ ТТ"></td>
    <td id="about">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>
      <span id="char0" title="Авторизация в API Zabbix">Z</span>
      <span id="char1" title="Авторизация в BSS">B</span>
      <span id="char2" title="SQL">S</span>
      <span id="char3" title="Zabbix">S</span>
      &nbsp;v0.6.15&nbsp;&nbsp;&nbsp;
      <input type="image" id="options" title="Настройки" align="absmiddle" src=".\images\icon-options.png" height=25 widgh=25>
      &nbsp;&nbsp;&nbsp;</b>
      </td>
    <td><button id="btResetFilter" style="width:140px;color:#007700" hidden="true">Показать все ТТ</button></td>
    <td valign = "baseline" align="left">Линейные продажи:<input type="text" id="LsSearchTT" size="7" placeholder="№ ТТ"></td>

  </table>

  <textarea id="hiddenText" hidden="true">This text invisible</textarea>
  <table id="tabsTable" border=0 width=100%>
    <tbody>
      <tr id="tabs" style='background-color:#AABBCC' border=0>
      </tr>
    </tbody>
  </table>
  <table id="mainTable" border=0 width=100%>
    <thead>
      <tr style="background-color:#AAAAAA">
        <td rowspan="2"><input id="headChBox" type="checkbox"></td>
        <td width="1%" rowspan="2">№</td>
        <td>
          <select id="thsStatus">
          <option value="0">Статус</option>
          <option value="1">Оформление</option>
          <option value="2">Service / Обслуживание</option>
          <option value="3">Resolved / Решена</option>
          <option value="4">Investigating / Расследование</option>
          <option value="4">Hold / Отложена</option>
          <option value="4">Closed / Закрыта</option>
          </select>
        </td>
        <td id="thDate" rowspan="2">Открытие</td>
        <td id="thRegion" rowspan="2">Регион</td>
        <td id="thAuthor" rowspan="2">Автор</td>
        <td id="thOtv" rowspan="2">
          <select id="resp_id_s" style="width:150px">
          <option value="0">Все отв.лица</option>
          </select>
        </td>
        <td id="thClient" rowspan="2"><input type="text" id="searchClient" placeholder="Клиент"></td>
        <td id="thName" rowspan="2"><input type="text" id="searchStr" placeholder="Краткое описание"></td>
        <td id="thClass" rowspan="2">Класс</td>
      </tr>
    </thead>
    <tbody id="mainTBody" style="background-color:#F8F8F8">
    </tbody>
  </table>

  <div id="status_line">
    <table border=0 width=100%>
      <tbody>
        <tr>
          <td id="statusFieldLeft" align="left"></td>
          <td id="statusFieldCenter"></td>
          <td id="statusFieldRight" align="right"></td>
        <tr>
      </tbody>
    </table>
  </div>

	<!-- popup Transfer -->	

  <div id="popupTransfer">
    <h4>Перевести отмеченые ТТ:</h4>
    <hr>
    <p>
      <select id="branchLiist" style="width:300px">
        <option value="100184">Технический департамент (МегаМакс) (13)</option>
      </select>
      <u><a id="branchNN" style="color:#1133AA">НН</a></u>&nbsp;
      <u><a id="branchNN2" style="color:#1133AA">НН2</a></u>&nbsp;
      <u><a id="branchMSK" style="color:#1133AA">Мск</a></u>&nbsp;
      <u><a id="branchSPB" style="color:#1133AA">СПб</a></u>&nbsp;
      <u><a id="branchRnD" style="color:#1133AA">РнД</a></u>&nbsp;
      <u><a id="branchSMR" style="color:#1133AA">Смр</a></u>&nbsp;
      <u><a id="branchEKB" style="color:#1133AA">Екб</a></u>&nbsp;
      <u><a id="branchYAR" style="color:#1133AA">Ярс</a></u>&nbsp;
      <u><a id="branchVLG" style="color:#1133AA">Влг</a></u>&nbsp;
      <p></p>
      <select id="resp_person_id" style="width:300px">
        <option value="0">- Все отв.лица -</option>
      </select>
    </p>
    <button id="buttonTransfer" disabled="true">Перевести</button>
    <button id="btnTransOnSelf" hidden="true">На себя</button>
    <p id="btTransfNote" style="color:#DD0000"></p>
  </div>

	<!-- popup Ticket -->	

  <div id="popupTicket">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td id="leftPopupTicket" valign="top">
          <table cellpadding="5" cellspacing="1" border="1">
            <tbody id="leftPTtBody" contenteditable="false">
              <tr><td style="width:75px">Номер ТТ</td><td style="width:280px"></td></tr>
              <tr><td>Создан</td><td></td></tr>
              <tr><td>Заголовок</td><td></td></tr>
              <tr><td>Автор</td><td></td></tr>
              <tr><td id="otv">Отв.лицо</td><td id="otv"></td></tr>
              <tr><td>Приоритет</td><td></td></tr>
              <tr><td id="stat">Статус</td><td id="stat"></td></tr>
              <tr><td>Регион</td><td></td></tr>
              <tr><td>Клиент</td><td></td></tr>
              <tr>
                <td>Zabbix</td>
                <td>
                  <a id="ptZping" style="color:#666666; font-weight:bold" href="https://zabbix.msk.unitline.ru/zabbix/dashboard.php" target="_blank">ping</a>
                  <input id="ptPingCBox" type="checkbox" title="Оповестить когда станет доступен" hidden="true">&nbsp;&nbsp;
                  <span id="ptHostidText">hostid:</span>
                  <input type="text" id="ptHostId" size="4" placeholder="ввести">&nbsp;&nbsp;или&nbsp;
                  <u><a id="ptFindHostId" style="color:#0000AA">найти</a></u>
                </td>
              </tr>
              <tr><td>Описание</td><td><div id="leftPopupTicketDescription"></div></td></tr>
            </tbody>
          </table>
        </td>
        <td id="rightPopupTicket" width="710px" valign="bottom">
          <div id="historyDiv">
            <table id=hTable contenteditable="true"></table>
          </div>
          <textarea id="comment" style="width:704px; height:55px"></textarea>
        </td>
      </tr>
      <tr>
        <td>
          <u><a id="toTabs" style="color:#6666FF">В закладки</a></u>
        </td>
        <td>
          <table width=100%>
            <tr>
              <td  id="PTtimer" style="color:#1133AA" align="left">
                <img src=".\images\timer.png" width="12" height="13">
                <span id="timeLeft" style="color:#666666; font-weight:normal">&nbsp;отключен&nbsp;</span>(
                <u><a id="plus5m">+5м</a></u>&nbsp;
                <u><a id="plus15m">+15м</a></u>&nbsp;
                <u><a id="plus1h">+1ч</a></u>&nbsp;
                <u><a id="plus3h">+3ч</a></u>&nbsp;
                <u><a id="plus6h">+6ч</a></u>&nbsp;&nbsp;
                <u><a id="plus0">0</a></u>)
              </td>
              <td align="right">
                <button id="ptPost" style="width:165px">Отправить (Ctrl+Enter)</button>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

	<!-- popup Zabix -->	

  <div id="popupZabix" style="background-color:#C0C0f0">
    <span id="pzCaption">Поиск узла для ТТ "</span>
    <hr>
    <div id="pzFoundTable">
      <table>
        <thead>
          <tr style="background-color:#77AAFF">
            <td>hostid</td>
            <td>IP</td>
            <td width="40"></td>
            <td><input type="text" id="pzLocation" style="width:300px" placeholder="Расположение"></td>
            <td><select id="pzClient" style="width:200px;color:#A0A0A0"></select></td>
          </tr>
        </thead>
        <tbody id="pzFound">
        </tbody>
      </table>
    </div>
    <hr>
    <table border ="1" style="width:100%" contenteditable="true">
      <tr align="center">
        <td id="pzHostId" style="width:37px"></td>
        <td id="pzIp" style="width:80px"></td>
        <td id="pzMAC" style="width:50px">-:-:-:-:-:-</td>
        <td id="pzHostName" colspan="3" align="left"></td>
      </tr>
      <tr>
        <td id="pzGroups"  colspan="6"></td>
      </tr>
      <tr>
        <td id="pzUpTime" colspan="4"></td>
        <td id="pzRunScripts" align="center" width="350">
          <u id="pzARP">&nbsp;ARP&nbsp;</u>&nbsp;&nbsp;
          <u id="pzTracert">&nbsp;Traceroute&nbsp;</u>&nbsp;&nbsp;
          <u id="pzDesOfInt">&nbsp;Description of interface&nbsp;</u>&nbsp;&nbsp;
          <u id="pzRunPing">&nbsp;Ping&nbsp;</u>&nbsp;
        </td>
        <td style="width:80px" contenteditable="false"><a id="pzPingGrath" href="https://zabbix.msk.unitline.ru/zabbix/dashboard.php" target="_blank">&nbsp;ping(График)&nbsp;</a></td>
      </tr>
      <tr>
        <td colspan="6"><div id="pzHostInfo"></div></td>
      </tr>
    </table>
    <hr>
    <button id="pzBtnOk">OK</button>&nbsp;&nbsp;<button id="pzBtnCancel">Отмена</button>&nbsp;&nbsp;
    <u><a id="pzNotInZbx" style="color:#6666FF">Считать, что для этого ТТ нет узла в Zabbix</a></u>

  </div>

	<!-- popup NewTT -->	

  <div id="popupNewTT">
    <table border ="0" >
      <tr><td>Краткое описание</td><td><input type="text" id="shortTTDescr" size="67"></td></tr>
      <tr>
        <td>Регион</td>
        <td>
          <select id="ppRegion" style="width:200px"></select>&nbsp;&nbsp;<a id="wikiLink" style="color:#3333DD"></a>
        </td>
      </tr>
      <tr>
        <td>Клиент</td>
        <td id="selectClient">
          <select id="ppClient" style="width:200px"></select>&nbsp;&nbsp;
          <a id="qSelectClient" style="color:#777777">*M.VIDEO*</a>&nbsp;&nbsp;
          <a id="qSelectClient" style="color:#777777">*X5*</a>&nbsp;&nbsp;
        </td>
      </tr>
      <tr><td>Описание</td><td><textarea id="TTDescr" style="width:500px; height:150px"></textarea></td></tr>
<!--      <tr>
        <td>Zabbix hostid:</td>
        <td>
          <input type="text" id="ppHostId" size="6" placeholder="ввести">&nbsp;&nbsp;или&nbsp;
          <a id="pnFindHostId" style="color:#0000AA">найти</a>
        </td>
      </tr> -->
    </table>
    <button id="ppBtnCreate">Сохранить</button>
    <button id="ppBtnAlert">AlertDown</button>
    <button id="ppBtnToTabs">В закладки</button>
  </div>

	<!-- popup EditTT -->	

  <div id="popupEditTT">
    <table border ="0">
      <tr><td>Краткое описание</td><td><input type="text" id="peShortTTDescr" size="67"></td></tr>
      <tr>
        <td>Регион</td>
        <td>
          <select id="peRegion" style="width:200px"></select>
        </td>
      </tr>
      <tr>
        <td>Клиент</td>
        <td>
          <select id="peClient" style="width:200px"></select>&nbsp;&nbsp;
        </td>
      </tr>
      <tr><td>Описание</td><td><textarea id="peTTDescr" style="width:500px; height:150px"></textarea></td></tr>
    </table>
    <button id="peBtnCreate">Сохранить</button>
  </div>

	<!-- popup Status -->	

  <div id="popupStatus">
    <table border ="0" >
      <tr><td>Класс</td><td>
        <select id="psClass" style="width:240px">
          <option value="0">- Укажите класс аварии -</option>
          <option value="25" title="Аварии на собственном станционном оборудовании ядра сети или сети агрегации,в том числе аварии на оборудовании БС, РРЛ и РТР, не попадающие под классификацию п.5, а также аварии на узлах телефонной связи">1. Аварии на опорной сети, сети агрегации</option>
          <option value="26" title="Аварии на оборудовании узлов доступа собственной сети (РЭС абонентских комплектов, коммутаторы и маршрутизаторы, шлюзы точек коллективного доступа и т.п.), на оборудровании доступа VNO-сети (маршрутизаторы, коммутаторы, WiFi-точки, телефонные шлюзы и пр.), кроме случаев п.5 и п.6 ">2. Аварии на сети доступа клиентов GA</option>
          <option value="27" title="Аварии на оборудовании узлов доступа собственной сети (РЭС абонентских комплектов, коммутаторы и маршрутизаторы, шлюзы точек коллективного доступа и т.п.), на оборудровании доступа VNO-сети (маршрутизаторы, коммутаторы, WiFi-точки, телефонные шлюзы и пр.), кроме случаев п.5 и п.6">3. Аварии на сети доступа клиентов B2B</option>
          <option value="28" title="Аварии на узлах доступа собственной сети (РЭС абонентских комплектов, маршрутизаторы, коммутаторы, телефонные шлюзы узлов доступа, абонентские линии домовых распределительных сетей и т.п.), кроме случаев п.5 и п.6">4. Аварии на сети доступа клиентов B2C</option>
          <option value="29" title="Аварии, связанные с обрывом ВОК (на сети уровня ядра, агрегации и доступа), аварии на АФУ и РЭС БС и РРЛ, расположенных на антенно-мачтовых сооружениях, дымовых трубах и друих сооружениях/зданиях со специальным режимом доступа к оборудованию">5. Аварии на линейно-кабельных сооружениях связи, антенно-фидерных устройствах БС, РРЛ или РТР</option>
          <option value="30" title="Аварии на электросетях, отключение услуг VNO за неуплату, аварии у взаимодействующих операторов связи, проблемы с оборудованием клиента">6. Аварии вне зоны ответственности технической службы VC </option>
          <option value="31" title="Прочее">7. Прочее</option>
        </select></td></tr>
      <tr><td>Подкласс</td><td><select id="psSubClass" style="width:240px"></select></td></tr>
      <tr><td>Тип аварии</td><td>
        <select id="psType" style="width:240px">
          <option value="0" selected>Авария на собственной сети</option>
          <option value="1">Авария на VNO-сети</option>
        </select></td></tr>
      <tr><td>Решение</td><td>
        <select id="psResolve" style="width:240px">
          <option value="1" selected>Решено удаленно</option>
          <option value="2">Решено с выездом</option>
        </select></td></tr>
      <tr><td>Комментарий</td><td><input type="text" id="psComment" size="50" placeholder="."></td></tr>
      <tr id="psCopyTr" hidden="true" border=1><td colspan=2><img id="psCopyImg" src=".\images\copy.png" width="15" height="15">&nbsp;<span id="psCopyText"></span></td></tr>

    </table>
    <hr>
    <button id="ps2Confirm" style="width:105px">Подтвердить</button>
    <button id="ps2Servis" style="width:110px">Обслуживание</button>
    <button id="ps2Resolved">Решена</button>
    <button id="ps2Hold">Отложена</button>
    <button id="ps2Investigating" style="width:120px">Расследование</button>
    <button id="ps2Close">Закрыть</button>
    <button id="ps2Edit" style="width:120px">Редактировать</button>
    <p id="psLabel">Нет доступных операций</p>
  </div>

	<!-- popup Login -->	

  <div id="popupLogin" align="center">
    <div id="divLoginInput" style="background-color:#ED1C24;width:250px">
      <br>
      <div><input id="sLogin" type="Text" maxlength="15" placeholder="Имя пользователя"></div>
      <div><input id="sPass" type="Password" maxlength="15" placeholder="Пароль"></div>
      <input id="savePass" type="checkbox">запомнить
      <br>&nbsp;
      <button id="plLogin" style="width:110px">Войти</button>
      <br>&nbsp;
    </div>
  </div>

	<!-- popup Options -->	

  <div id="popupOptions" align="center">
    <table><tbody id='poTbody'>
      <tr><td>Следить за переводом в решенные</td><td><input id="poCheckResolved" type="checkbox"></td>
    </tbody></table>
    <br>
    <button id="poSave" style="width:140px">Сохранить</button>
  </div>

	<!-- popup RunScripts -->	

  <div id="popupRunScripts" align="right" contenteditable="true">
    <span id="prsCaption"></span>
    <div id="popupInRunScripts" align="left" style="background-color:#F0F0F0;padding:7px"></div>
    <p>
    <button id="prsCloseBtn" style="width:110px">Закрыть</button>
  </div>
  <div id="tempDiv" hidden="true">
  </div>
  <div id="backgroundPopup"></div>

</body>

</html>